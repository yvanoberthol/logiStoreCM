"use strict";!function($){$.paging=function(el,options,index){var options,_$pageItems,_$paginationHolder,_totalPages,_currentPage,_totalItems,_stealth_mode,_this=this,_index=index,_initialize=function(){_drawPage(),_bindEvents(_this.$el)},_init=function(){options=$.extend({},$.paging.defaultOptions,options),options.onBeforeInit(_this,$(el)),_this.$el=$(el),_currentPage=1,_$paginationHolder=_this.$el.children().first(),_$pageItems=_$paginationHolder.children(),_totalItems=_$pageItems.length,_totalPages=Math.ceil(_totalItems/options.number_of_items),_stealth_mode=options.stealth_mode,_$paginationHolder.css("visibility","hidden"),options.onAfterInit(_this,$(el))},_drawPage=function(pageNumber){if(pageNumber=pageNumber||1,_isPageValid(pageNumber)){var number_of_items=options.number_of_items,start=0,end=5,$pagerDom=_this.$el.find("ul.pager");if(options.onBeforeEveryDraw(_this,$pagerDom),_currentPage=pageNumber,end=parseInt(pageNumber*number_of_items),start=parseInt(end-number_of_items),options.animate!==!0){_$paginationHolder.html("").css("visibility","visible");for(var i=start;end>i;i++)_$paginationHolder.append(_$pageItems.eq(i))}else _$paginationHolder.children().fadeOut(function(){_$paginationHolder.html("").css("visibility","visible");for(var i=start;end>i;i++)_$paginationHolder.append(_$pageItems.eq(i));_$paginationHolder.children().each(function(i){$(this).fadeIn(200*i)})});_stealth_mode||($pagerDom&&$pagerDom.length?$pagerDom.replaceWith(_getPager(options.pagination_type)):_$paginationHolder.after(_getPager(options.pagination_type)),$pagerDom=_this.$el.find("ul.pager")),_isFirstPage()&&($(".first, .prev",$pagerDom).attr("disabled","disabled"),options.onFirstPage(_this,$pagerDom)),$(".page_"+pageNumber,$pagerDom).attr("disabled","disabled"),_isLastPage()&&($(".next, .last",$pagerDom).attr("disabled","disabled"),options.onLastPage(_this,$pagerDom)),options.onAfterEveryDraw(_this,$pagerDom)}},_isFirstPage=function(){return 1===_currentPage},_isLastPage=function(){return _currentPage===_totalPages},_isPageValid=function(number){return 1>number||number>_totalPages?!1:!0},_bindEvents=function($el){_stealth_mode||($el[0].removeEventListener("click",pageEventsManager,!1),$el[0].removeEventListener("keyup",pageEventsManager,!1),$el[0].addEventListener("click",pageEventsManager,!1),$el[0].addEventListener("keyup",pageEventsManager,!1))},pageEventsManager=function(evt){var $target=$(evt.target);if("BUTTON"==evt.target.nodeName&&$target.parents(".pager").length&&("keydown"==evt.type&&13==evt.keyCode||"click"==evt.type)){var gotoPageNumber;gotoPageNumber=$target.hasClass("next")?_currentPage+1:$target.hasClass("prev")?_currentPage-1:$target.hasClass("last")?_this.getTotalPages():$target.hasClass("first")?1:parseInt($target.text()),_drawPage(gotoPageNumber),$target.focus()}},_pagerButtons={getFirstButton:function(text){return'<button class="first" type="button">'+(text||"First")+"</button>"},getLastButton:function(text){return'<button class="last" type="button">'+(text||"Last")+"</button>"},getPrevButton:function(text){return'<button class="prev" type="button">'+(text||"Prev")+"</button>"},getNextButton:function(text){return'<button class="next" type="button">'+(text||"Next")+"</button>"},getPagerButton:function(text){return'<button type="button" class="page_'+text+'">'+text+"</button>"}},_getPager=function(type){var pagerTemplate,pagerArray=_getPagerArray(_currentPage),theme=options.theme;switch(type){case"prev_next":pagerTemplate='<ul class="pager pager_'+_index+" "+theme+'"><li>'+_pagerButtons.getPrevButton()+"</li><li>"+_pagerButtons.getNextButton()+"</li></ul>";break;case"first_prev_next_last":pagerTemplate='<ul class="pager pager_'+_index+" "+theme+'"><li>'+_pagerButtons.getFirstButton()+"</li><li>"+_pagerButtons.getPrevButton()+"</li><li>"+_pagerButtons.getNextButton()+"</li><li>"+_pagerButtons.getLastButton()+"</li></ul>";break;default:pagerTemplate='<ul class="pager pager_'+_index+" "+theme+'"><li>'+_pagerButtons.getFirstButton()+"</li><li>"+_pagerButtons.getPrevButton()+"</li>";for(var _i=0;_i<pagerArray.length;_i++)pagerTemplate+="<li>"+_pagerButtons.getPagerButton(pagerArray[_i])+"</li>";pagerTemplate+="<li>"+_pagerButtons.getNextButton()+"</li><li>"+_pagerButtons.getLastButton()+"</li></ul>"}return pagerTemplate},_getPagerArray=function(page){var pageButtons=options.number_of_page_buttons,totalPages=_totalPages,pagerArray=[],currentpage=page||1;if(pageButtons>totalPages)for(var k=1;totalPages>=k;k++)pagerArray.push(k);else{var left=currentpage,right=currentpage;for(pagerArray.push(currentpage);(left>=1||totalPages>=right)&&pagerArray.length<pageButtons&&(left>1&&(left--,pagerArray.push(left)),pagerArray.length<pageButtons);)right!=totalPages&&(right++,pagerArray.push(right));pagerArray.sort(function(a,b){return a-b})}return pagerArray},_destroy=function(){_this.$el.data("paging_set",null).find("ul.pager").remove(),_$paginationHolder.html(_$pageItems)};_this.getTotalPages=function(){return _totalPages},_this.getCurrentPageNumber=function(){return _currentPage},_this.drawPage=function(number){number>0&&_drawPage(number)},_this.goToPage=_this.drawPage,_this.goToNextPage=function(){var pageNumber=_currentPage+1;return _this.drawPage(_currentPage+1),_isLastPage()?_currentPage:pageNumber},_this.goToPrevPage=function(){var pageNumber=_currentPage-1;return _this.drawPage(pageNumber),_isFirstPage()?_currentPage:pageNumber},_this.isFirstPage=function(){return _isFirstPage()},_this.isLastPage=function(){return _isLastPage()},_this.destroy=function(){_destroy()},_init(),function(){_initialize()}()},$.paging.defaultOptions={number_of_items:5,pagination_type:"full_numbers",number_of_page_buttons:3,stealth_mode:!1,animate:!0,onBeforeEveryDraw:function(){},onAfterEveryDraw:function(){},onBeforeInit:function(){},onAfterInit:function(){},onFirstPage:function(){},onLastPage:function(){},theme:"light_connected"},$.fn.paging=function(options){return this.each(function(index,element){void 0==$(element).data("paging_js")&&$(element).data("paging_js",new $.paging(element,options,index))})}}(jQuery);